package:
  name: ara
  authors:
    - "Matheus Cavalcante <matheusd@iis.ee.ethz.ch>"
    - "Matteo Perotti <mperotti@iis.ee.ethz.ch>"
    - "Basile Bougenot <basileb@student.ethz.ch>"
    - "Nils Wistoff <nwistoff@iis.ee.ethz.ch>"
    - "Paul Scheffler <paulsc@iis.ee.ethz.ch>"
    - "Vincenzo Maisto <vincenzo.maisto2@unina.it>"

dependencies:
  # NOTE: This is not used for configuration management in the ARA project
  #       Instead, version control is done with git submodules
  apb_uart:           { git: "https://github.com/pulp-platform/apb_uart.git",           version: 0.0 }
  axi:                { git: "https://github.com/pulp-platform/axi.git",                version: 0.0 }
  common_cells:       { git: "https://github.com/pulp-platform/common_cells.git",       version: 0.0 }
  cva6:               { git: "https://github.com/pulp-platform/cva6.git",               version: 0.0 }
  tech_cells_generic: { git: "https://github.com/pulp-platform/tech_cells_generic.git", version: 0.0 }
  riscv-dbg:          { git: "https://github.com/pulp-platform/riscv-dbg.git",          version: 0.0 }

workspace:
  checkout_dir: "hardware/deps"

export_include_dirs:
  - hardware/include

sources:
  files:
    # Headers
    - hardware/include/rvv_pkg.sv
    - hardware/include/ara_pkg.sv

    # For CVA6 caches, final reference should be cva6/common/local/util/sram.sv
    # NOTE: this needs to go once CVA6 is updated
    - hardware/deps/cva6/src/util/sram.sv 
    # Obsolete
    # - hardware/src/axi_to_mem.sv 

    # Sources
    # Level 1    
    - hardware/src/ara_bootrom.sv
    - hardware/src/ctrl_registers.sv
    - hardware/src/cva6_accel_first_pass_decoder.sv
    - hardware/src/ara_dispatcher.sv
    - hardware/src/ara_sequencer.sv
    - hardware/src/axi_inval_filter.sv
    - hardware/src/lane/lane_sequencer.sv
    - hardware/src/lane/operand_queue.sv
    - hardware/src/lane/operand_requester.sv
    - hardware/src/lane/simd_alu.sv
    - hardware/src/lane/simd_div.sv
    - hardware/src/lane/simd_mul.sv
    - hardware/src/lane/vector_regfile.sv
    - hardware/src/lane/power_gating_generic.sv
    - hardware/src/masku/masku.sv
    - hardware/src/sldu/p2_stride_gen.sv
    - hardware/src/sldu/sldu_op_dp.sv
    - hardware/src/sldu/sldu.sv
    - hardware/src/vlsu/addrgen.sv
    - hardware/src/vlsu/vldu.sv
    - hardware/src/vlsu/vstu.sv
    # Level 2
    - hardware/src/lane/operand_queues_stage.sv
    - hardware/src/lane/valu.sv
    - hardware/src/lane/vmfpu.sv
    - hardware/src/lane/fixed_p_rounding.sv
    - hardware/src/vlsu/vlsu.sv
    # Level 3
    - hardware/src/lane/vector_fus_stage.sv
    # Level 4
    - hardware/src/lane/lane.sv
    # Level 5
    - hardware/src/ara.sv
    
    - target: not(ara_jtag)
      files:
      # Level 6
      - hardware/src/ara_system.sv
      # Level 7
      - hardware/src/ara_soc.sv

    - target: ara_test
      files:
        # NOTE: Avoid target cva6_test which will cause conflicts
        #       This needs to go once CVA6 is updated
        - hardware/deps/cva6/tb/common/mock_uart.sv # for simulation
        - target: not(ara_jtag)
          files:
          # Level 1
          - hardware/tb/ara_testharness.sv
        # Level 2
        - hardware/tb/ara_tb.sv
        # Level 3
        - hardware/src/accel_dispatcher_ideal.sv

        - target: verilator
          files:
            # Level 2
            - hardware/tb/ara_tb_verilator.sv

    - target: spyglass
      files:
        - hardware/spyglass/src/ara_soc_wrap.sv

    - target: all(fpga, xilinx)
      files:
        - fpga/src/ara_xilinx.sv

    - target: ara_jtag
      files:
        - hardware/jtag/src/ara_system_jtag.sv
        - hardware/jtag/src/ara_soc_jtag.sv
        - hardware/jtag/tb/ara_testharness_jtag.sv

        # - target: verilator
        #   files:
        #     # - hardware/jtag/deps/rocket-chip/src/main/resources/vsrc/SimJTAG.v
        #     # # - hardware/jtag/deps/rocket-chip/src/main/resources/vsrc/SimDTM.v
        #     # - hardware/jtag/tb/ara_jtag_testharness.sv
        #     # - hardware/jtag/tb/verilator/ara_jtag_tb_verilator.sv
        
        # # TBD
        # - target: vsim
        #   files:
        #     # - hardware/jtag/tb/vsim/ara_jtag_tb_vsim.sv

